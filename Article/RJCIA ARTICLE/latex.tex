		%%%% patron de format latex pour rfia 2000.
		%%%% sans garanties. Plaintes \`a envoyer \`a \dev\null.
		%%%% deux colonnes pas de num\'erotation et 10 points
		%%%% necessite les fichiers a4.sty french.sty et rfia2000.sty
		
		%%%% Pour \LaTeXe
		\documentclass[a4paper,twoside,french]{article}
		\usepackage{rfia2000}
		\usepackage[T1]{fontenc}
		\usepackage[francais]{babel}
		\usepackage{times}
		\usepackage{algorithm,algpseudocode}
		\usepackage{array}
		\usepackage{stfloats}
		\usepackage{amsmath}
		\usepackage{graphicx}
		\usepackage{caption}
		\usepackage{subcaption}
		\usepackage{subfig} 
		\usepackage{float}
		\newfloat{algorithm}{t}{lop}
		\algtext*{EndFor}% Remove "end while" text
		\algtext*{EndIf}% Remove "end if" text
		\algtext*{EndProcedure}
		
		\begin{document}
		%%%%%Pas de date
		\date{}
		%%%%% Titre gras 14 points
		\title{\Large\bf Réparation de plans dans les HTNs réactifs en utilisant la planification symbolique
		       }
	
		\author{\begin{tabular}[t]{c@{\extracolsep{6em}}c@{\extracolsep{6em}}c}
		%%%% pour quatre auteurs
		%%%%\author{\begin{tabular}[t]{c@{\extracolsep{4em}}c@{\extracolsep{4em}}c@{\extracolsep{4em}}c}
		%%%%pour plus d\'ebrouillez-vous !
		Lydia Ould Ouali${}^1$  & Charles Rich${}^2$ & Nicolas Sabouret${}^1$\\
		\end{tabular}
		{} \\
		 \\
		${}^1$        LIMSI-CNRS, UPR 3251, Orsay, France \\
							Univ. Paris-Sud, Orsay, France \\
		${}^2$        	Worcester Polytechnic Institute\\ Worcester, MA, USA\\
		{} \\
		 \\
		 ouldouali@limsi.fr \\
		%Mon adresse complète \\
		%Mon adresse électronique
		}
		\maketitle
		%%%%  Pas de num\'erotation sur la page de titre
		\thispagestyle{empty}
		\subsection*{R\'esum\'e}
		
		\subsection*{Mots Clef}
		
		
		\subsection*{Abstract}
		
		\subsection*{Keywords}
		
		
		
		\section{Introduction}
		Le domaine de la planification s'intéresse à la construction de séquences d'actions pour accomplir une tâche de manière automatique. Pour ce faire, les systèmes de planification sont définis autours de trois principaux modules. Le premier module définit une représentation formelle du monde appelée domaine de connaissances. Le second est un moteur de planification (planificateur) pour raisonner sur le domaine de connaissance et produire des plans qui achèvent les buts du système. Enfin,  un moniteur d'exécution pour surveiller la bonne exécution des actions du plan dans le monde. Dans ce contexte deux approches complémentaires existent. La première approche est la planification symbolique. Cette dernière propose de définir une représentation logique complète et fidèle  du monde pour permettre au système de planification de construire à l'avance des plans viables et ensuite les exécuter dans le monde. Le système de planification le plus répondu utilisant cette approche est  HTN (i.e Hierarchical Task Network) \cite{erol1996hierarchical}. Les HTNs permettent une décomposition récursives des tâches complexes en sous tâches plus simple qui peuvent être directement exécutées dans le monde. 
		\par Cependant, l'approche symbolique est basées sur deux hypothèses erronées. La première hypothèse affirme qu'il est possible de construire un domaine de connaissance complet d'un monde dynamique, mais plusieurs recherches ont prouvés que la modélisation complète d'un tel monde requiert un effort considérable d'ingénierie de la connaissance \cite{zhuo2009learning} si ce n'est impossible à réaliser \cite{maes1990designing}. La seconde hypothèse soutient que le plan est l'unique entités capable de modifier l'état du monde, alors qu'un monde dynamique peut être changé par différente entités comme d'autres agents évoluant dans ce monde. Ces limites ont pour conséquences de faire échouer l?exécution du plan car d'une part si le monde est mal modélise, le plan produit ne représentera pas fidèlement le monde réel et d'une autre part les actions des autres entités du monde peuvent faire échouer l?exécution d'une action du plan. L'échec de l'exécution du plan est appelé \emph{cassure}. Par exemple, imaginons un agent qui planifie pour déplacer un objet d'une \textit{Pièce1} a une  \textit{Pièce2}. La représentation HTN est définie dans figure \ref{Fig:repair}. L'agent entame l?exécution de la tâche \textit{PickUpBox}, poursuit avec la tâche \textit{NavigateDoor(Pièce1, Pièce2)}, imaginons maintenant qu'après avoir exécuté la tâche pour ouvrir la porte, un courant d'air passa et claqua la porte. Par conséquent, la tâche \textit{walkThrough} se trouve bloquée car la porte est à présent fermée.  L'exécution du plan est alors bloquée et une \emph{cassure} est détectée.
	 \par La planification réactive \cite{firby1987investigation} au contraire, fait le choix d'abandonner la phase de construction de plan et propose de définir un modèle d'exécution qui choisis la prochaine action à exécuter à partir d'un ensemble de différentes alternatives prédéfinies dans le domaine de connaissance et en tenant en compte les changements observés dans le monde. Le domaine de connaissance est défini en utilisant l'architecture hiérarchique des HTN  avec un formalisme procédural pour la définition des tâches, pour cette raison nous appelons les planificateurs réactifs des \textit{HTNs réactifs}. La définition du formalisme procédural se rapproche du monde réel ce qui le rends plus facile à modéliser et réduit par conséquent  la complexité de la planification dans les domaines complexes. Néanmoins, les HTN réactifs restent limité. En effet, le formalise réactif n'utilise pas de modèle symbolique: l'exécution d'un HTN "réactif" repose sur des scripts procéduraux ( Ex: JavaScript), fonctionnant comme des boîtes noires dont la seule fonctionnalité est l'exécution dans l'état courant. Donc si une cassure est détectée ; une cassure apparaît lorsque le système ne trouve plus, dans le modèle, d'actions pour continuer l'exécution. Les  HTNs  réactifs se trouvent dans l'impossibilité de raisonner pour trouver un plan de réparation.  Pourtant, l'expérience montre que la majorité de ces scripts ont la forme de propositions, qui pourraient être représentées de manière symbolique. L'idée que nous défendons dans cet article est qu'il est possible, à moindre coût, d'augmenter la planification réactive à l'aide de connaissances symboliques pour permettre au système de réparer des cassures. 
	 \par Dans la prochaine section, nous présentons un exemple qui illustre le problème des breakdowns en planification réactive. Nous présentons ensuite les travaux en planification symbolique et en planification réactive autour de la répération de breakdowns qui nous ont conduit à proposer notre modèle. Nous présentons dans la section 4 notre système Discolog et l'algorithme de replanification. La section 5 présente les résultats d'une première expérimentation qui étudie l'impact des connaissances symboliques sur la réparation de plans.
			\begin{figure}[t]
						\centering
						\includegraphics[width=0.5\textwidth]{Figures/fig1.png}
						\caption{la décomposition HTN pour la tâche MoveBox}
						\label{Fig:repair}
					\end{figure}
		
		% La planification réactive qui, au contraire, fait le choix d'abandonner la phase de construction de plan et propose de définir un modèle d'exécution décrivant les différentes alternatives, sélectionnées seulement lors de l'exécution. Une cassure apparait lorsque le système ne trouve plus, dans le modèle, de solution pour continuer l'exécution du plan.
		%- Le problème de la planification réactive, c'est qu'elle n'utilise pas (ou rarement) de modèle symbolique: l'exécution d'un HTN "réactif" repose sur des scripts procéduraux, fonctionnant comme des boites noires. Une cassure ne peut donc pas être réparée.
		%- Pourtant, l'expérience montre que la majorité de ces scripts ont la forme de propositions, qui pourraient être représentées de manière symbolique. L'idée que nous défendons dans cet article est qu'il est possible, à moindre coût, d'augmenter la planification réactive à l'aide de connaissances symboliques pour permettre au système de réparer des cassures.
		%- Dans la prochaine section, nous présentons un exemple qui illustre le problème des breakdowns en planification réactive. Nous présentons ensuite les travaux en planification symbolique et en planification réactive autour de la répération de breakdowns qui nous ont conduit à proposer notre modèle. Nous présentons dans la section 4 notre système Discolog et l'algorithme de replanification. La section 5 présente les résultats d'une première expérimentation qui étudie l'impact des connaissances symboliques sur la réparation de plans.
		\section{\'Etat de l'art}
		
		
		
		\subsection{Le formalisme des HTNs}
		\par Le domaine de connaissances des HTNs est représenté comme un arbre AND/OR. les n?uds AND représentent les tâches. Chaque tâche est définie avec des préconditions pour vérifier l'applicabilité de la tâche, et des postconditions pour vérifier si la tâche s'est exécutée correctement. Les HTNs sont définis avec deux types de tâches; les tâches primitives (les feuilles de l'arbre). Ces dernières peuvent être directement exécutées dans le monde. Les tâches non primitives qui doivent être décomposées en sous tâches en utilisant une recette de décomposition spécifique. Les recettes sont des n?uds Or qui représentent des méthodes de décompositions d'une tâche non primitive. Les recettes sont définis avec des conditions d'applicabilités. Les HTNs planifient pour satisfaire des tâches buts en décomposant les tâches en sous tâches plus primitive jusqu'à l'obtention d'une séquence de tâches primitives qui une fois exécutées satisfassent la tâche bute.
		\subsection{Travaux connexes}
		Dans cette section, nous relatons les travaux éxistants qui traitent du problème de cassure dans les systèmes de planification. Les systèmes de planifications symboliques et spécialement les HTNs sont devenues performants pour produire des plans prometeurs  avec d'excellents résultats dans des problèmes de planifications complexe. Nous citons SHOP \cite{nau1999shop} ou encore SIPE \cite{wilkins1988practical}. Cependant, ils restent sensibles aux cassures a cause des deux principales limitations présentées précédement. Afin d'y remedier, plusieurs recherches se sont intéréssés à la construction de systèmes de planifications capable de réparer ses plans s'ils recontrent une cassure durant l'exécution. Le principe de la réparation de plans consiste à modifier le moins possible le plan original afin d'éviter de replanifier 
		La stratégie principale de ses recherches est de se focaliser seulement sur le second problème & savoir la nature dynamique de monde. Pour cette raison, ces systèmes construisent en plus du plan une structure aditionnelle appelée "arbre de dépendance" qui va contenir tous les dépendances et liens logiques entre les tâche impliqué dans la constuction du plan produit. Cet arbre de dépendance a pour rôle de calculer la tâche candidate à réparer si une cassure est détéctée. Le planificateur est ensuite appelé pour proposer une décomposition pour la tâche candidate.  
%		\par Breakdowns are faced in both symbolic and reactive planning. In this section we present the existing approaches that address this problematic. The recent  symbolic HTN planners become very efficient to define promising plans such as SHOP \cite{nau1999shop} or SIPE \cite{wilkins1988practical}. Yet, they can still be affected by breakdowns. Therefore, several researches have raised  recently an interest to develop planning systems that include plan repair  and replanning capabilities to deal with breakdowns faced during the execution. Plan repair module avoid replanning from the scratch and propose efficient local repair with minimal costs \cite{boella2002replanning,van2005plan,ayan2007hotride,warfield2007adaptation}. To that end, additional structures (i.e dependency graph)  are built to monitor dependencies among the tasks of the initial plan. This graph is used to calculate the task candidate to repair if a breakdowns occurs. The planning system is next called to propose a new decomposition to the task candidate. The assumption made by these systems is that the model is well designed and breakdowns are only caused because of the dynamic nature of the world that breaks the execution of the plan. Thus, it only requires replanning. The proposed solutions can't be generalized to reactive HTN because they use logical dependencies to calculate task candidate. In the absence  absence of logical knowledge in procedural DK theses method cannot be applied.
%				
%				\par Reactive planning also rise the problematic  of \emph{breakdowns} among researchers dealing with investigations in reactive planning. The work presented in  \cite{firby1987investigation} suggests that robots need strategic planning to detect problematic situations before they occur. Therefore, it proposes to add a strategic planner's job which put constraints on the planner behavior before its execution in order to prevent inefficiencies. Theses constraints can be an ordering tasks in the execution queue of the planner or choosing the most promising decomposition for compounded tasks.
%				C.Brom \cite{brom2005hierarchical} discussed the observed limitations of the  Simple Hierarchical Reactive planning (S-HRP) used to control human agents or IVAs (Intelligent Virtual Agent) that degrade the believability of the IVA behavior. Among the limits discussed in his work, he pointed  the necessity of planning to maintain a believable and intelligent behavior of the agent. For example to be able to see the distance of tasks to execute, especially to achieve goals with time constraint. In the end of the discussion, he proposes to extend its S-HRP system to N-GHRP, negotiatory goal driven hierarchical reactive planning. Unfortunately, any article related this work was found.   
%				%	To overcome these limitation,HPR's execution was extended by a semantic StateFull plans (SPF) and the resulting architecture is named StateFull HRP	\cite{plchtowards}.  SPF is a Finite State Machine that integrate HRP's reactive plan as part of its workflow. In addition, a semantic layer is added to allow the agent reasoning, planning and cleaning up its behavior. The results of this architecture is a more structured plan execution that ensure a more believable behavior of IVA.   
%				\par In this paper we support the claim of strategic planning to extend reactive planning. Therefore, we present a different approach based on a hybrid system that extends a reactive planning system with a symbolic planner to recover from breakdowns.
%		\bibliographystyle{ieeetr}
		\bibliography{bibliography} % The references (bibliography) information are stored in the file named "Bibliography.bib"
					
		\end{document}
		
		
