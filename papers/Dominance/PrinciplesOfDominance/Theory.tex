	\documentclass{article}
		\usepackage[noend]{algpseudocode}
		\usepackage{subfig} 
		\usepackage{usual}
		\usepackage{amsmath}
		\usepackage{graphicx}
		\usepackage{eulervm}
		\usepackage{fontenc}
		\usepackage{mathrsfs}
		\usepackage{multirow}
		\usepackage{array}
		\usepackage[rflt]{floatflt}
		\usepackage{makecell}
		\usepackage{breqn}
		\usepackage{xcolor, soul}
		\sethlcolor{yellow}	
		\usepackage{pbox}
	
		\renewcommand\theadalign{cb}
		\renewcommand\theadfont{\bfseries}
		\renewcommand\theadgape{\Gape[4pt]}
		\renewcommand\cellgape{\Gape[4pt]}
		%\pagestyle{plain}
		%
		\begin{document}
		\title{\vskip -10pt}
		
		\author{Lydia Ould Ouali\inst{1}, Charles Rich\inst{2} \and
		Nicolas Sabouret\inst{1} }
		
	
	\section{Domain model}
		Consider a sequence of criterion sets $C_1, C_2, ..., C_n$ and an options set defined as the cross-product:
				$O = C_1 \times C_2 \times \ldots C_n$.
		
		For example, for restaurants, the criteria might be: \\
			Cuisine = \{Chinese, French, ...\} \\
			Cost = \{cheap, expensive, ...\} \\
			Atmosphere = \{quiet, lively, ...\} \\
		
	\par and a restaurant options might be: 
		\begin{itemize}
			 \item $[Chinese, cheap, lively]$. 
			 \item $[Chinese, expensive, quit]$.   
			 \item $[Chinese, expensive, lively]$.
			 \item $[French, cheap, quit]$.  
			 \item $[French, expensive, quit]$.   
			 \item $[Chinese, expensive, lively]\ldots$ 
		\end{itemize}
  
  
	\section{Self model} 
	
	\subsection{Preferences for self}
	Preferences are partial orders (transitive, asymmetric binary relations) on the criterion sets. The preference relation on the criterion set $C_i$ is denoted by $\prec_i$.
	
	Let $\prec$ denotes the sequence of preferences $\{ \prec_i, \prec_2, ..., \prec_n\}$
	
	\subsection{Self satisfaction function} 
	
	Satisfaction is a function normalized to [0,1] that evaluates an element of a criterion set relative to the corresponding preference relation, defined as follows.
	
	For $c \in C_i$ and $\prec_i$:
	
	$$sat(c, \prec_i) =	1 - \left( \frac{|\{d : d \neq c \  \wedge \ (c \prec_i d)\}| }{( |C_i| - 1 )}\right)  $$
	
	Satisfaction is generalized to options as a weighted sum.
	For $o \in O$ and where $o_i$ is the i-th element of $o$ and $\prec_i$ the i-th element of $\prec$.
	
	$$sat(o, \prec) = \frac{\sum_{i}^{n} sat(o_i, \prec_i) }{n} $$
	
	
	\section{Dialogue model}
	 We present in the section the knowledge that the agent gather and processed from the dialogue.

	\subsection{Other model}
		We do not have detailed knowledge of the preferences of the other; the agent only knows which criteria values the other has said are acceptable or unacceptable.

		Let the collection of $A_i \subseteq C_i$ be the criterion values that are acceptable to the other, and $U_i \subseteq C_i$ be the criteria values that are unacceptable.  We assume $A_i \cap U_i = \emptyset$.  Note	that some values are thus unknown.

		Then the acceptability of a criterion $c \in C_i$ is a function normalized to [0,1] and defined as follows.
		$$ other(c, A_i, U_i)= \left\{\begin{array}{ll}
			1	 & \mathrm{if\ }  c \in A_i\\
			0    & \mathrm{if\ }c \in U_i\\
			0.5	 & \mathrm{otherwise}
			\end{array}\right.$$
		This function is generalized to options as a weighted sum.
	
		$$other(o, A, U) = \frac{ \sum_{i}^{n} other(o_i, A_i, U_i) } {n}$$ 
	
	\subsection{Negotiation state}
		During a negotiation, negotiators express two types of utterances: %that we name \emph{statement moves} and \emph{negotiation moves}. 
		
		\begin{itemize}
			\item \emph{Statement move:} Speaker share information about its preferences (StatePreference) or ask other about his preferences (askPreferences).
			\item \emph{Negotiation move:} Interlocutors negotiate about the different options of a topic (Propose, accept or reject proposals).
		\end{itemize}
	
	
		 In order to produce coherent dialogues, the agent keeps track about the different states of the dialogue, that each move updates. 
		
		The negotiation might focus on each criterion of the discussed topic. For example, in a negotiation on restaurants, they might negotiate about the type of \textit{cuisine}, and the \textit{ambiance} to choose.  We note $D$ the set of criteria which have been discussed during the dialogue. When interlocutors agree on a value of a criterion to choose, the negotiation on this criterion is then considered as \textit{closed}. We note $Cl$ the set of closed criteria.
		
		For each discussed criterion $C_i \in D$, the agent register the following information:		
		\begin{itemize}
			\item Let the collection of $S_i \subset C_i$ be the criterion values stated by the agent in the dialogue.
			\item Proposals which are made during the negotiation by both negotiators might have different status. They can either be accepted or rejected with respect of the decisional model (See section \ref{decision}).
				\subitem - $Op_i$ is the set of  values which have been proposed in the negotiation.
				\subitem - $Ac_i$  is the set of values which have been accepted in the negotiation.
				\subitem - $Rej_i$  is the set of values which have been rejected in the negotiation.
		\end{itemize}
		
	Moreover, interlocutors are allowed to make proposals of options. Therefore we define the same structure of proposals for the options; $Op_o, Rej_o, Ac_o$

	\section{Decision based on dominance in negotiation}
	\label{decision}
	\subsection{Satisfaction of Self preferences Vs Other preferences}

	\subsubsection{Dominance and concession}
	Let  $dom \in [0, 1] $ denotes the dominance of an agent (self) in the 	relationship.  It is a constant for a given agent in a given relationship.
	
	The weight that an agent gives to its self-satisfaction relative to	the satisfaction of the other is a time-varying function normalized to 	[0,1] of its dominance, defined as below.
		$$self(dom, t) = \left\{\begin{array}{ll}
		dom & \mathrm{if\ } (t \leq \tau)\\
		max(0, dom - (\frac{\delta}{dom} . (t - \tau))) & \mathrm{otherwise}
		\end{array}\right.$$
		
	
	where is $t \geq 0$ is the number of open or rejected proposals.
	
	This is called the "concession curve", where $\tau > 0$ and $\delta > 0$
	are parameters of the theory in general and are initially assumed to
	be 2 and 0.1, respectively.
	\subsubsection{Acceptability for self}

	The self-acceptability of a criterion $c \in C_i$ is a function	normalized to [0,1] and defined as below.
	
	$$acc(dom, t, c, \prec, A, U) = self(dom, t) . sat(c, \prec_i) \ +\  (1 - self(dom, t)) . other(c, A_i, U_i)$$
	
	Acceptability is generalized to options as a weighted sum.
	
	$$acc(dom, t, o, \prec, A, U) = \frac{ \sum_{i}^{n} acc(dom, t, o_i, \prec_i, A_i, U_i) } {n}$$ 
	
	
	\section{Lead of the negotiation}

	
	\subsection{Choosing an utterance type}
		Let $V$ be the set of available options (values), such that option :$ V\rightarrow O$	i.e., each value is a "name" for an option.  For example, V is the set of restaurants that are mutually known to the participants. This can be a many-to-one function, e.g., there could be two restaurants with same criteria.		
		
		We present in the following the possible responses and their applicability conditions. Note that each line (utterance)  assumes that the previous ones are already not applicable.
	
	$ chooseUtterance(dom, t, V, \prec, A, U) = $ \\
	
	
	\textbf{if(\textbf{dom  $>\sigma$})} \\
	\begin{tabular}{|p{3cm}|p{9cm}|}
		\hline
		\textbf{Utterance type} & Condition \\
		\hline
	 Negotiation success & $\exists o \in Acc_o$   \emph{OR} $o \in Op_o$ such that  $sat(o, \prec) \geq \beta$ \\
		\hline
		Negotiation failure & $ \forall c \in C_i$,  $c \in Rej_i$\\
		\hline
		State & $type(u^{-1}) = AskPreference$ \\
		\hline
		Propose & Otherwise  \\
		
	\hline
	\end{tabular}
	\\ \\
		
	\textbf{if(\textbf{dom  $<\sigma$})} \\
	
	\begin{tabular}{|p{3cm}|p{9cm}|}
		\hline
		\textbf{Utterance type} & Condition \\
		\hline
		Negotiation success &  $\exists o \in Acc_o$ such that $o \in Acc_o$ \\
		\hline
		Accept & $\exists c \in Op_i$, $sat(c, \prec_i) \geq \beta$ \newline \emph{OR}   \newline $ \exists o \in Op_o$ ,  $sat(c, \prec_i) \geq \beta$ \\
		\hline
		Reject & $\exists c \in Op_i$, $sat(c, \prec_i) < \beta$  \emph{OR}   $ \exists o \in Op_o$ ,  $sat(c, \prec_i) < \beta$ \newline  \emph{AND} $t<\tau$.\\
		\hline
		Propose & $\exists c$ / $other(c, A_i, U_i)  = 1 $  \emph{and}
		\newline ($sat(c, \prec_i) \geq \beta$
		\newline \emph{OR}  
		\newline $\forall c \in C_i$,  $c \in Ac_i$\\
		\hline
		Ask &  \textbf{(}$t> \tau,$ \emph{and} 
		$\exists c \in Op_i /$
		 $ sat(c, \prec_i) < \beta $\textbf{) }
		\newline \emph{OR}
		\newline \textbf{(}$ \forall c \in C_i,other(c, A_i, U_i)=0.5$
		\newline \emph{OR} 
		\newline \textbf{(}$\exists c \in \{Ac_i, Rej_i\}$ / 
		$sat(c, \prec_i) \geq \beta$ \textbf{)} \\
		\hline
		
		State & $type(u^{-1}) = AskPreference$
		\newline \emph{OR}
		\newline $\exists x,other(x, A_i, U_i) \not = 0.5 $ 
		\newline \emph{OR}
		\newline $ \exists C \in \mathcal{C}, A_i(C) = Unkown$
		\\
		\hline
	\end{tabular}
	

	\subsection{Choosing a value for an utterance}
	
	
%	Note that argmax may not be unique.  This function may be used to help 	decide utterance type and/or choose the argument after the utterance
%	type is chosen.	
	%(Note: V may change during negotiation, e.g., by removing rejected	options, but I think this can be an implementation code
	%issue---discussed at next level of detail?)
	
	The following function returns the most acceptable element of V.

	 $$ chooseValue(dom, t, V, \prec, A, U) =	\operatorname*{arg\,max}_{name \in V} acc(dom, t, option(name), \prec, A, U) $$
	
	Note that argmax may not be unique.  The following function returns the most acceptable element of	criterion $C_i$.
	
	$$chooseCriterion(dom, t, V, \prec, A, U, C_i) = option(chooseValue(dom, t, V, \prec, A, U, C_i))_i$$
	

	$$chooseCriterion'(dom, t, V, \prec, A, U, C_i) =	\operatorname*{arg\,max}_{c\in C_i} acc(dom, t, c, \prec, A, U)$$
	
	These functions may be used to help choose the argument of a proposal for the Propose utterance.
	
	\section{Summary of general parameters }
	\begin{itemize}

		\item $\sigma \in $[0,1] : boundary between submissive and dominant used in
				choosing an utterance type
		\item $\beta$:  a value that represent the minimum score that a value has to get to be positively satisfiable to the agent preferences in the negotiation. Note that $\beta = const \times self(dom,t)$.
		\item $\tau > 0$ : the minimum number of open or rejected proposals before.
				concession begins
		\item $\delta > 0$ : parameter in slope of concession curve.
		\item $u^{-1}$ refers to the previous utterance.
		
		
	\end{itemize}

	
%	% BIBLIO %
%	
%	\vskip 4pt
%	\bibliographystyle{plain}
%	\bibliography{abbrevs,Library}
	\end{document}