<?xml version="1.0" encoding="UTF-8"?>
<taskModel xmlns="http://www.cs.wpi.edu/~rich/cetask/cea-2018-ext"
           xmlns:disco="urn:disco.wpi.edu:Disco"
           xmlns:n="urn:negotiate.limsi.fr:Negotiate"
           about="urn:negotiate.limsi.fr:Example">
   <task id="trees">
      <subtasks id="_trees_subtasks">
         <step name="_trees_step" task="disco:Say"/>
         <step name="_trees_ref" task="_trees_tree"/>
         <binding slot="$_trees_step.text" value="&#34;What type of cuisine do you prefer?&#34;"/>
         <binding slot="$_trees_step.external" value="false"/>
      </subtasks>
   </task>
   <task id="State">
      <subtasks id="_State_subtasks">
         <step name="_State_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_State_ref" task="_State_tree"/>
         <binding slot="$_State_step.external" value="true"/>
      </subtasks>
   </task>
   <task id="Ask">
      <subtasks id="_Ask_subtasks">
         <step name="_Ask_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_Ask_ref" task="_Ask_tree"/>
         <binding slot="$_Ask_step.external" value="true"/>
      </subtasks>
   </task>
   <task id="Accept">
      <subtasks id="_Accept_subtasks">
         <step name="_Accept_step" task="n:fr.limsi.negotiate.lang.Accept"/>
         <step name="_Accept_ref" task="_Accept_tree"/>
         <binding slot="$_Accept_step.external" value="true"/>
      </subtasks>
   </task>
   <task id="Reject">
      <subtasks id="_Reject_subtasks">
         <step name="_Reject_step" task="n:fr.limsi.negotiate.lang.Reject"/>
         <step name="_Reject_ref" task="_Reject_tree"/>
         <binding slot="$_Reject_step.external" value="true"/>
      </subtasks>
   </task>
   <task id="Propose">
      <subtasks id="_Propose_subtasks">
         <step name="_Propose_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_Propose_ref" task="_Propose_tree"/>
         <binding slot="$_Propose_step.external" value="true"/>
      </subtasks>
   </task>
   <task id="_State_tree">
      <subtasks id="_d4e11_subtasks">
         <step name="_d4e11_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e11_ref" task="_d4e11_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e11_step.external" value="false"/>
         <binding slot="$_d4e11_step.less" value="reactUser($state).getLess()"/>
         <binding slot="$_d4e11_step.more" value="reactUser($state).getMore()"/>
      </subtasks>
      <subtasks id="_d4e17_subtasks">
         <step name="_d4e17_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e17_ref" task="_d4e17_tree"/>
         <applicable>isDom()</applicable>
         <binding slot="$_d4e17_step.external" value="false"/>
         <binding slot="$_d4e17_step.less"
                  value="getPreference(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e17_step.more"
                  value="getPreference(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e23_subtasks">
         <step name="_d4e23_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e23_ref" task="_d4e23_tree"/>
         <applicable>isSub()</applicable>
         <binding slot="$_d4e23_step.external" value="false"/>
         <binding slot="$_d4e23_step.proposal"
                  value="createCriterionProposal(getLastUserPref()) "/>
      </subtasks>
      <subtasks id="_d4e29_subtasks">
         <step name="_d4e29_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_d4e29_ref" task="_d4e29_tree"/>
         <applicable>!isDom()</applicable>
         <binding slot="$_d4e29_step.external" value="false"/>
         <binding slot="$_d4e29_step.less" value="askUserPref(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e29_step.more" value="askUserPref(getDiscussedCriterion()).getMore()"/>
      </subtasks>
   </task>
   <task id="_d4e11_tree">
      <subtasks id="_d4e12_subtasks">
         <step name="_d4e12_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e13_subtasks">
         <step name="_d4e13_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e14_subtasks">
         <step name="_d4e14_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e15_subtasks">
         <step name="_d4e15_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e16_subtasks">
         <step name="_d4e16_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e17_tree">
      <subtasks id="_d4e18_subtasks">
         <step name="_d4e18_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e19_subtasks">
         <step name="_d4e19_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e20_subtasks">
         <step name="_d4e20_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e21_subtasks">
         <step name="_d4e21_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e22_subtasks">
         <step name="_d4e22_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e23_tree">
      <subtasks id="_d4e24_subtasks">
         <step name="_d4e24_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e25_subtasks">
         <step name="_d4e25_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e26_subtasks">
         <step name="_d4e26_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e27_subtasks">
         <step name="_d4e27_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e28_subtasks">
         <step name="_d4e28_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e29_tree">
      <subtasks id="_d4e30_subtasks">
         <step name="_d4e30_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e31_subtasks">
         <step name="_d4e31_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e32_subtasks">
         <step name="_d4e32_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e33_subtasks">
         <step name="_d4e33_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e34_subtasks">
         <step name="_d4e34_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_Ask_tree">
      <subtasks id="_d4e36_subtasks">
         <step name="_d4e36_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e36_ref" task="_d4e36_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e36_step.external" value="false"/>
         <binding slot="$_d4e36_step.less" value="reactUser($ask).getLess()"/>
         <binding slot="$_d4e36_step.more" value="reactUser($ask).getMore()"/>
      </subtasks>
      <subtasks id="_d4e42_subtasks">
         <step name="_d4e42_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e42_ref" task="_d4e42_tree"/>
         <applicable>isSub()</applicable>
         <binding slot="$_d4e42_step.external" value="false"/>
         <binding slot="$_d4e42_step.proposal" value="createCriterionProposal(getLastUserPref())"/>
      </subtasks>
      <subtasks id="_d4e48_subtasks">
         <step name="_d4e48_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_d4e48_ref" task="_d4e48_tree"/>
         <applicable>isDom()</applicable>
         <binding slot="$_d4e48_step.external" value="false"/>
         <binding slot="$_d4e48_step.less" value="askUserPref(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e48_step.more" value="askUserPref(getDiscussedCriterion()).getMore()"/>
      </subtasks>
   </task>
   <task id="_d4e36_tree">
      <subtasks id="_d4e37_subtasks">
         <step name="_d4e37_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e38_subtasks">
         <step name="_d4e38_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e39_subtasks">
         <step name="_d4e39_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e40_subtasks">
         <step name="_d4e40_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e41_subtasks">
         <step name="_d4e41_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e42_tree">
      <subtasks id="_d4e43_subtasks">
         <step name="_d4e43_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e44_subtasks">
         <step name="_d4e44_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e45_subtasks">
         <step name="_d4e45_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e46_subtasks">
         <step name="_d4e46_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e47_subtasks">
         <step name="_d4e47_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e48_tree">
      <subtasks id="_d4e49_subtasks">
         <step name="_d4e49_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e50_subtasks">
         <step name="_d4e50_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e51_subtasks">
         <step name="_d4e51_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e52_subtasks">
         <step name="_d4e52_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e53_subtasks">
         <step name="_d4e53_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_Accept_tree">
      <subtasks id="_d4e55_subtasks">
         <step name="_d4e55_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e55_ref" task="_d4e55_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e55_step.external" value="false"/>
         <binding slot="$_d4e55_step.less"
                  value="getPreference(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e55_step.more"
                  value="getPreference(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e62_subtasks">
         <step name="_d4e62_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e62_ref" task="_d4e62_tree"/>
         <binding slot="$_d4e62_step.external" value="false"/>
         <binding slot="$_d4e62_step.proposal" value="createCriterionProposal(getLastUserPref())"/>
      </subtasks>
      <subtasks id="_d4e68_subtasks">
         <step name="_d4e68_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_d4e68_ref" task="_d4e68_tree"/>
         <binding slot="$_d4e68_step.external" value="false"/>
         <binding slot="$_d4e68_step.less" value="askUserPref(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e68_step.more" value="askUserPref(getDiscussedCriterion()).getMore()"/>
      </subtasks>
   </task>
   <task id="_d4e55_tree">
      <subtasks id="_d4e56_subtasks">
         <step name="_d4e56_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e57_subtasks">
         <step name="_d4e57_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e58_subtasks">
         <step name="_d4e58_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e59_subtasks">
         <step name="_d4e59_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e60_subtasks">
         <step name="_d4e60_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e62_tree">
      <subtasks id="_d4e63_subtasks">
         <step name="_d4e63_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e64_subtasks">
         <step name="_d4e64_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e65_subtasks">
         <step name="_d4e65_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e66_subtasks">
         <step name="_d4e66_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e67_subtasks">
         <step name="_d4e67_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e68_tree">
      <subtasks id="_d4e69_subtasks">
         <step name="_d4e69_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e70_subtasks">
         <step name="_d4e70_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e71_subtasks">
         <step name="_d4e71_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e72_subtasks">
         <step name="_d4e72_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e73_subtasks">
         <step name="_d4e73_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_Reject_tree">
      <subtasks id="_d4e76_subtasks">
         <step name="_d4e76_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e76_ref" task="_d4e76_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e76_step.external" value="false"/>
         <binding slot="$_d4e76_step.less"
                  value="getPreference(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e76_step.more"
                  value="getPreference(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e84_subtasks">
         <step name="_d4e84_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e84_ref" task="_d4e84_tree"/>
         <binding slot="$_d4e84_step.external" value="false"/>
         <binding slot="$_d4e84_step.proposal"
                  value="generateRandomProposal(getDiscussedCriterion())"/>
      </subtasks>
      <subtasks id="_d4e91_subtasks">
         <step name="_d4e91_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_d4e91_ref" task="_d4e91_tree"/>
         <binding slot="$_d4e91_step.external" value="false"/>
         <binding slot="$_d4e91_step.less" value="askUserPref(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e91_step.more" value="askUserPref(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e98_subtasks">
         <step name="_d4e98_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e98_ref" task="_d4e98_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e98_step.external" value="false"/>
         <binding slot="$_d4e98_step.less"
                  value="reactToProposal(lastRejectedProposal()).getMore()"/>
         <binding slot="$_d4e98_step.more"
                  value="reactToProposal(lastRejectedProposal()).getLess()"/>
      </subtasks>
      <subtasks id="_d4e104_subtasks">
         <step name="_d4e104_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e104_ref" task="_d4e104_tree"/>
         <binding slot="$_d4e104_step.external" value="false"/>
         <binding slot="$_d4e104_step.proposal" value="lastRejectedProposal()"/>
      </subtasks>
   </task>
   <task id="_d4e76_tree">
      <subtasks id="_d4e77_subtasks">
         <step name="_d4e77_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e78_subtasks">
         <step name="_d4e78_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e79_subtasks">
         <step name="_d4e79_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e80_subtasks">
         <step name="_d4e80_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e81_subtasks">
         <step name="_d4e81_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e84_tree">
      <subtasks id="_d4e85_subtasks">
         <step name="_d4e85_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e86_subtasks">
         <step name="_d4e86_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e87_subtasks">
         <step name="_d4e87_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e88_subtasks">
         <step name="_d4e88_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e89_subtasks">
         <step name="_d4e89_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e91_tree">
      <subtasks id="_d4e92_subtasks">
         <step name="_d4e92_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e93_subtasks">
         <step name="_d4e93_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e94_subtasks">
         <step name="_d4e94_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e95_subtasks">
         <step name="_d4e95_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e96_subtasks">
         <step name="_d4e96_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e98_tree">
      <subtasks id="_d4e99_subtasks">
         <step name="_d4e99_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e100_subtasks">
         <step name="_d4e100_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e101_subtasks">
         <step name="_d4e101_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e102_subtasks">
         <step name="_d4e102_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e103_subtasks">
         <step name="_d4e103_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e104_tree">
      <subtasks id="_d4e105_subtasks">
         <step name="_d4e105_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e106_subtasks">
         <step name="_d4e106_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e107_subtasks">
         <step name="_d4e107_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e108_subtasks">
         <step name="_d4e108_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e109_subtasks">
         <step name="_d4e109_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_Propose_tree">
      <subtasks id="_d4e111_subtasks">
         <step name="_d4e111_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e111_ref" task="_d4e111_tree"/>
         <applicable>isSub() &amp;&amp; lastOpenProposal() != null</applicable>
         <binding slot="$_d4e111_step.external" value="false"/>
         <binding slot="$_d4e111_step.less" value="reactToProposal(lastOpenProposal()).getLess()"/>
         <binding slot="$_d4e111_step.more" value="reactToProposal(lastOpenProposal()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e117_subtasks">
         <step name="_d4e117_step" task="n:fr.limsi.negotiate.lang.StatePreference"/>
         <step name="_d4e117_ref" task="_d4e117_tree"/>
         <applicable>isPeer()</applicable>
         <binding slot="$_d4e117_step.external" value="false"/>
         <binding slot="$_d4e117_step.less"
                  value="getPreference(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e117_step.more"
                  value="getPreference(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e124_subtasks">
         <step name="_d4e124_step" task="n:fr.limsi.negotiate.lang.Propose"/>
         <step name="_d4e124_ref" task="_d4e124_tree"/>
         <applicable>isDom()</applicable>
         <binding slot="$_d4e124_step.external" value="false"/>
         <binding slot="$_d4e124_step.proposal"
                  value="generateRandomProposal(getDiscussedCriterion())"/>
      </subtasks>
      <subtasks id="_d4e130_subtasks">
         <step name="_d4e130_step" task="n:fr.limsi.negotiate.lang.AskPreference"/>
         <step name="_d4e130_ref" task="_d4e130_tree"/>
         <binding slot="$_d4e130_step.external" value="false"/>
         <binding slot="$_d4e130_step.less"
                  value="askUserPref(getDiscussedCriterion()).getLess()"/>
         <binding slot="$_d4e130_step.more"
                  value="askUserPref(getDiscussedCriterion()).getMore()"/>
      </subtasks>
      <subtasks id="_d4e136_subtasks">
         <step name="_d4e136_step" task="n:fr.limsi.negotiate.lang.Accept"/>
         <step name="_d4e136_ref" task="_d4e136_tree"/>
         <binding slot="$_d4e136_step.external" value="false"/>
         <binding slot="$_d4e136_step.proposal" value="lastOpenProposal()"/>
      </subtasks>
      <subtasks id="_d4e142_subtasks">
         <step name="_d4e142_step" task="n:fr.limsi.negotiate.lang.Reject"/>
         <step name="_d4e142_ref" task="_d4e142_tree"/>
         <binding slot="$_d4e142_step.external" value="false"/>
         <binding slot="$_d4e142_step.proposal" value="lastOpenProposal()"/>
      </subtasks>
   </task>
   <task id="_d4e111_tree">
      <subtasks id="_d4e112_subtasks">
         <step name="_d4e112_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e113_subtasks">
         <step name="_d4e113_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e114_subtasks">
         <step name="_d4e114_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e115_subtasks">
         <step name="_d4e115_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e116_subtasks">
         <step name="_d4e116_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e117_tree">
      <subtasks id="_d4e118_subtasks">
         <step name="_d4e118_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e119_subtasks">
         <step name="_d4e119_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e120_subtasks">
         <step name="_d4e120_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e121_subtasks">
         <step name="_d4e121_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e122_subtasks">
         <step name="_d4e122_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e124_tree">
      <subtasks id="_d4e125_subtasks">
         <step name="_d4e125_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e126_subtasks">
         <step name="_d4e126_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e127_subtasks">
         <step name="_d4e127_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e128_subtasks">
         <step name="_d4e128_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e129_subtasks">
         <step name="_d4e129_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e130_tree">
      <subtasks id="_d4e131_subtasks">
         <step name="_d4e131_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e132_subtasks">
         <step name="_d4e132_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e133_subtasks">
         <step name="_d4e133_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e134_subtasks">
         <step name="_d4e134_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e135_subtasks">
         <step name="_d4e135_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e136_tree">
      <subtasks id="_d4e137_subtasks">
         <step name="_d4e137_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e138_subtasks">
         <step name="_d4e138_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e139_subtasks">
         <step name="_d4e139_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e140_subtasks">
         <step name="_d4e140_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e141_subtasks">
         <step name="_d4e141_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_d4e142_tree">
      <subtasks id="_d4e143_subtasks">
         <step name="_d4e143_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e144_subtasks">
         <step name="_d4e144_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e145_subtasks">
         <step name="_d4e145_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e146_subtasks">
         <step name="_d4e146_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e147_subtasks">
         <step name="_d4e147_step" task="Reject"/>
      </subtasks>
   </task>
   <task id="_trees_tree">
      <subtasks id="_d4e4_subtasks">
         <step name="_d4e4_step" task="State"/>
      </subtasks>
      <subtasks id="_d4e5_subtasks">
         <step name="_d4e5_step" task="Propose"/>
      </subtasks>
      <subtasks id="_d4e6_subtasks">
         <step name="_d4e6_step" task="Ask"/>
      </subtasks>
      <subtasks id="_d4e7_subtasks">
         <step name="_d4e7_step" task="Accept"/>
      </subtasks>
      <subtasks id="_d4e8_subtasks">
         <step name="_d4e8_step" task="Reject"/>
      </subtasks>
   </task>
   <script init="true">

    var APPLICABLE_TEST = null; // for testing
    var dom = 0;
    $state ="State";
    $ask ="Ask";
    $negotiation = $disco.getInteraction().getSystem().getNegotiation();
    $ambiance = Packages.fr.limsi.negotiate.restaurant.Ambiance.class ;
    $cuisine = Packages.fr.limsi.negotiate.restaurant.Cuisine.class ;
    $less = Packages.fr.limsi.negotiate.restaurant.Cuisine.ITALIAN;
    $more = Packages.fr.limsi.negotiate.restaurant.Cuisine.CHINESE;
    $lastProposal = null;

    function mostPreferredCuisine() {
       return (Packages.fr.limsi.negotiate.restaurant.Cuisine.ITALIAN);
    }
    
    function leastPreferredCuisine () {   
       		return (Packages.fr.limsi.negotiate.restaurant.Cuisine.ITALIAN);  		
    }
    
    function getLastUserPref() { 
    	if (getLastUserStatement("State") !=null)
    		return (getLastUserStatement("State").getStatedPreference());
    	
    	else 
    		return null;
    }
    
    function getLastUserStatement(uttType){
		return $negotiation.context.getLastStatement(uttType, true);
	}
	
	 function getLastAgentStatement(uttType){
		return $negotiation.context.getLastStatement(uttType, false);
	}
	
	 function reactUser(uttType){
    	return($negotiation.reactUserStatement(uttType));
    }
 
 	function lastOpenProposal(){
	
		return $lastProposal;
	}
	
	function updateProposal(proposal){
		$lastProposal = proposal;
	}
    
    function getPreference(criterion){
		return ($negotiation.getRandomPreference(criterion));
	}
	
	function sameStatement(uttType){
		if (getLastUserStatement(uttType) == null ||  getLastAgentStatement (uttType) == null)
			return false;		
		return(getLastAgentStatement(uttType).equals(getLastUserStatement(uttType)));
	}

	function askUserPref(criterion){
		return ($negotiation.askUserPreference(criterion));
	}
	
	
	function createProposal(criterion) {
	// Enlever le  il doit etre uniquement specifier dans la maj de l'etat mental
		if(criterion == null)
			return null;
		return $negotiation.criterionProposal(criterion);
	}
	
	function createCriterionProposal(preference) {
			if (preference == null)
				return null;
			else 		
				return $negotiation.criterionProposal(preference.getMore());
	}
	
	function createOptionProposal(option) {
		return $negotiation.optionProposal(option);
	}
	
	
	
	function getDiscussedCriterion(){
		return $negotiation.context.getDiscussedCriterion();
	}
		
	function lastRejectedProposal (){
		return ($negotiation.context.getLastProposal("REJECTED"));
	}
	
	function lastOpenProposal (){
		return ($negotiation.context.getLastProposal("OPEN"));
		
	}
	
	function lastAcceptedCriterion(){
			return ($negotiation.context.getLastProposal("ACCEPTED"));
	
	}
	
	function generateRandomProposal(criterion){
		return ($negotiation.generateRandomProposal(criterion));
	}
	
	function reactToProposal(proposal){
		if (proposal != null)
			return ($negotiation.reactToProposal(proposal));
		else
			return getPreference($cuisine);
	}
	
	function reactToAsk() {
		
	}
	
	function isDom(){
		return(dom &gt; 0)
	}
	
	function isPeer(){
		return(dom==0)
	}
	
	function isSub(){
		return (dom &lt; 0)
		
	
	}      
    
  </script>
</taskModel>