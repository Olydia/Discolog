<?xml version="1.0" encoding="utf-8"?>
<model about="urn:negotiate.limsi.fr:Example"
       xmlns="http://www.cs.wpi.edu/~rich/d4g"
       xmlns:disco="urn:disco.wpi.edu:Disco"
       xmlns:n="urn:negotiate.limsi.fr:Negotiate"
       xmlns:t="http://www.cs.wpi.edu/~rich/cetask/cea-2018-ext">



<agent id="Invitation" text="Would you like to go out with me on the town tonight?">
	<user text="That would be great ! .">
		<do id="statePreference"/>
		
 	</user>
 	<user text="No. I have plans for tonight">
		<do task="CloseDialogue"/>
  	</user>
</agent>


<agent id="CloseDialogue" text="No problem, another day maybe">
  <user text="Sure !."/>
  <user text="yeah, I'll call you tommorow."/>
</agent> 

  <do id="statePreference" actor="agent" task="n:fr.limsi.negotiate.lang.StatePreference">

    <do actor="user" task="n:fr.limsi.negotiate.lang.StatePreference">

      <!-- both of these options should initially be suppressed by
           STATE_PREFERENCE_TEST precondition 
      
     	 <do actor="agent" task="n:fr.limsi.negotiate.lang.StatePreference"
          less="leastPreferredCuisine()" more="null"
          />

     	 <do actor="agent" task="n:fr.limsi.negotiate.lang.StatePreference"
          less="null" more="mostPreferredCuisine()"/> 
	 -->
    </do>

    <do actor="user" task="n:fr.limsi.negotiate.lang.StatePreference"
        less="Packages.fr.limsi.negotiate.restaurant.Cuisine.FRENCH"
        more="Packages.fr.limsi.negotiate.restaurant.Cuisine.JAPANESE">

      <agent text="Forget it. I am not going to dinner with you."/>

    </do>

    <user text="I don't feel like going out for dinner"/>
      
  </do>

 

  <t:script init="true">
    var APPLICABLE_TEST = null; // for testing

    $negotiation = $disco.getInteraction().getSystem().getNegotiation();
    $cuisine = Packages.fr.limsi.negotiate.restaurant.Cuisine.class ;
    $lastProposal = null;

	function lastOpenProposal(){
	
		return $lastProposal;
	}
	
	updateProposal (proposal) {
		$lastProposal = proposal;
	}

 
   
    
    
      
  </t:script>
  
</model>
